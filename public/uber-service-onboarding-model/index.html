<!DOCTYPE html>
<html lang="en-us">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=58150&amp;path=livereload" data-no-instant defer></script>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    
    <title>Service onboarding model for Uber (2014). | Drafting Strategy</title>
    <meta name="viewport" content="width=device-width,minimum-scale=1">
    <meta name="description" content="At the core of Uber&rsquo;s service migration strategy (2014) is understanding the service onboarding process, and identifying the levers to speed up that process. Here we&rsquo;ll develop a system model representing that onboarding process, and exercise the model to test a number of hypotheses about how to best speed up provisioning.
In this chapter, we&rsquo;ll cover:
Where the model of service onboarding suggested we focus on efforts Developing a system model using the lethain/systems package on Github.">
    <meta name="generator" content="Hugo 0.128.2">
    
    
    
      <meta name="robots" content="noindex, nofollow">
    
    <meta name="author" content="map[name:Will Larson]">
    

    
<link rel="stylesheet" href="/ananke/css/main.min.css" >



  
    <link rel="stylesheet" href="/static/pygments.css">
  


    

    
      

    

    

    
      <link rel="canonical" href="http://localhost:58150/uber-service-onboarding-model/">
    

    <meta property="og:url" content="http://localhost:58150/uber-service-onboarding-model/">
  <meta property="og:site_name" content="Drafting Strategy">
  <meta property="og:title" content="Service onboarding model for Uber (2014).">
  <meta property="og:description" content="At the core of Uber’s service migration strategy (2014) is understanding the service onboarding process, and identifying the levers to speed up that process. Here we’ll develop a system model representing that onboarding process, and exercise the model to test a number of hypotheses about how to best speed up provisioning.
In this chapter, we’ll cover:
Where the model of service onboarding suggested we focus on efforts Developing a system model using the lethain/systems package on Github.">
  <meta property="og:locale" content="en_us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="strategies">
    <meta property="article:published_time" content="2025-01-09T05:00:00-07:00">
    <meta property="article:modified_time" content="2025-01-09T05:00:00-07:00">
    <meta property="article:tag" content="Model">
    <meta property="article:tag" content="Systems-Thinking">
    <meta property="article:tag" content="Eng-Strategy-Book">
    <meta property="og:image" content="http://localhost:58150/static/author.png">

  <meta itemprop="name" content="Service onboarding model for Uber (2014).">
  <meta itemprop="description" content="At the core of Uber’s service migration strategy (2014) is understanding the service onboarding process, and identifying the levers to speed up that process. Here we’ll develop a system model representing that onboarding process, and exercise the model to test a number of hypotheses about how to best speed up provisioning.
In this chapter, we’ll cover:
Where the model of service onboarding suggested we focus on efforts Developing a system model using the lethain/systems package on Github.">
  <meta itemprop="datePublished" content="2025-01-09T05:00:00-07:00">
  <meta itemprop="dateModified" content="2025-01-09T05:00:00-07:00">
  <meta itemprop="wordCount" content="1620">
  <meta itemprop="image" content="http://localhost:58150/static/author.png">
  <meta itemprop="keywords" content="Model,Systems-Thinking,Eng-Strategy-Book">
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:image" content="http://localhost:58150/static/author.png">
  <meta name="twitter:title" content="Service onboarding model for Uber (2014).">
  <meta name="twitter:description" content="At the core of Uber’s service migration strategy (2014) is understanding the service onboarding process, and identifying the levers to speed up that process. Here we’ll develop a system model representing that onboarding process, and exercise the model to test a number of hypotheses about how to best speed up provisioning.
In this chapter, we’ll cover:
Where the model of service onboarding suggested we focus on efforts Developing a system model using the lethain/systems package on Github.">

	

  </head><body class="ma0 avenir bg-white development">

    
   
  <header>
  <div class="bg-white">
    <nav class="pv3 ph3 ph4-ns" role="navigation">
  <div class="flex-l justify-between items-center center">
    <a href="/" class="f3 fw2 no-underline black-90 dib">
      
        Drafting Strategy
      
    </a>
    <div class="flex-l items-center">
      

      
        <ul class="pl0 mr3">
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="no-underline black-90" href="/about" title="About page">
              About
            </a>
          </li>
          
          <li class="list f5 f4-ns fw4 dib pr3">
            <a class="no-underline black-90" href="" title=" page">
              
            </a>
          </li>
          
        </ul>
      
      















    </div>
  </div>
  
    
</nav>

  </div>
</header>



    <main class="pb7" role="main">
      
  
  <article class="flex-l flex-wrap justify-between mw8 center ph3">
    <header class="mt4 w-100">
      
      
      <h1 class="f1 athelas mt3 mb3">Service onboarding model for Uber (2014).</h1>
      
      

      
      

    </header>
    <div class="nested-copy-line-height lh-copy serif f5 nested-links nested-img mid-gray pr4-l w-two-thirds-l"><p>At the core of
<a href="/uber-service-migration-strategy/">Uber&rsquo;s service migration strategy (2014)</a>
is understanding the service onboarding process, and identifying the levers
to speed up that process. Here we&rsquo;ll develop a
<a href="/strategy-systems-modeling/">system model</a>
representing that onboarding process, and exercise the model to test a number
of hypotheses about how to best speed up provisioning.</p>
<p>In this chapter, we&rsquo;ll cover:</p>
<ol>
<li>Where the model of service onboarding suggested we focus on efforts</li>
<li>Developing a system model using the <a href="https://github.com/lethain/systems">lethain/systems</a> package on Github.
That model <a href="https://github.com/lethain/eng-strategy-models/blob/main/UberServiceOnboarding.ipynb">is available in the lethain/eng-strategy-models</a>
repository</li>
<li>Exercising that model to learn from it</li>
</ol>
<p>Let&rsquo;s figure out what this model can teach us.</p>
<h2 id="learnings">Learnings</h2>
<p>Even if we model this problem with a 100% success rate (e.g. no errors at all),
then the backlog of requested new services continues to increase over time.
This clarifies that the problem to be solved is not the quality
of service the service provisioning team is providing, but rather that
the fundamental approach is not working.</p>
<p><img src="/static/blog/strategy/uber-model-diag-1.png" alt="Initial diagram of Uber service provisioning model without error states."></p>
<p>Although hiring is tempting as a solution, our model suggests it is not a particularly valuable approach in this scenario.
Even increasing the Service Provisioning team&rsquo;s staff allocated to manually provisioning services by 500%
doesn&rsquo;t solve the backlog of incoming requests.</p>
<p><img src="/static/blog/strategy/uber-model-chart-infra-hiring.png" alt="Chart showing impact of increased infrastructure engineering hiring on service provisioning."></p>
<p>If reducing errors doesn&rsquo;t solve the problem, and increased hiring for the team doesn&rsquo;t solve the problem,
then we have to find a way to eliminate manual service provisioning entirely.
The most promising candidate is moving to a self-service provisioning model,
which our model shows solves the backlog problem effectively.</p>
<p><img src="/static/blog/strategy/uber-model-chart-self-service.png" alt="Chart showing impact of self-service provisioning on provisioning rate."></p>
<p>Refining our earlier statement, additional hiring may benefit the team if we are able to focus those
hires on building self-service provisioning, and were able to
<a href="/productivity-in-the-age-of-hypergrowth/">ramp their productivity</a>
faster than the increase of incoming service provisioning requests.</p>
<h2 id="sketch">Sketch</h2>
<p>Our initial sketch of service provisioning is a simple pipieline starting with
<code>requested services</code> and moving step by step through to <code>server capacity allocated</code>.
Some of these steps are likely much slower than others, but it gives a sense of the
stages and where things might go wrong. It also gives us a sense of what we can measure
to evaluate if our approach to provisioning is working well.</p>
<p><img src="/static/blog/strategy/uber-provis-model.png" alt="A systems model of provisioning services at Uber circa 2014."></p>
<p>One element worth mentioning are the dotted lines from <code>hiring rate</code> to <code>product engineers</code> and
from <code>product engineers</code> to <code>requested services</code>. These are called <em>links</em>, which are stocks that
influence another stock, but don&rsquo;t flow directly into them.</p>
<div class="bg-light-gray br4 ph3 pv1">
<p>A purist would correctly note that links should connect to flows rather than stocks.
That is true! However, as we&rsquo;ll encounter when we convert this sketch into a model,
there are actually several counterintuitive elemnents here that are necessary to model
this system but make the sketch less readable.
As a modeler, you&rsquo;ll frequently encounter these sorts of tradeoffs,
and you&rsquo;ll have to decide what choices serve your needs best in the moment.</p>
</div>
<p>The biggest missing element the initial model is missing is error flows,
where things can sometimes go wrong in addition to sometimes going right.
There are many ways things can go wrong, but we&rsquo;re going to focus on modeling
three error flows in particular:</p>
<ol>
<li>
<p><code>Missing/incorrect information</code> occurs twice in this model, and throws
a provisioning request back into the initial provisioning phase where information is collected.</p>
<p>When this occurs during port assignment, this is a relatively small trip backwards.
However, when it occurs in Puppet configuration, this is a significantly larger
step backwards.</p>
</li>
<li>
<p><code>Puppet error</code> occurs in the second to final stock, <code>Puppet configuration tested &amp; merged</code>.
This sends requests back one step in the provisioning flow.</p>
</li>
</ol>
<p>Updating our sketch to reflect these flows, we get a fairly complete, and somewhat nuanced,
view of the service provisioning flow.</p>
<p><img src="/static/blog/strategy/uber-provis-model-errors.png" alt="A systems model of provisioning services at Uber circa 2014, with error transitions"></p>
<p>Note that the combination of these two flows introduces the possibility of a service
being almost fully provisioned, but then traveling from Puppet testing back to Puppet configuration
due to <code>Puppet error</code>, and then backwards again to the intial step due to <code>Missing/incorrect information</code>.
This means it&rsquo;s possible to lose almost all provisioning progress if everything goes wrong.</p>
<p>There are more nuances we could introduce here, but there&rsquo;s already enough complexity here for us
to learn quite a bit from this model.</p>
<h2 id="reason">Reason</h2>
<p>Studying our sketches, a few things stands out:</p>
<ol>
<li>
<p>The hiring of product engineers is going to drive up service provisioning requests
over time, but there&rsquo;s no counterbalancing hiring of infrastructure engineers to
work on service provisioning. This means there&rsquo;s an implicit, but very real,
deadline to scale this process independently of the size of the infrastructure
engineering team.</p>
<p>Even without building the full model, it&rsquo;s clear that we have to either stop hiring product engineers,
turn this into a self-service solution, or find a new mechanism to discourage
service provisioning.</p>
</li>
<li>
<p>The size of error rates are going to influence results a great deal,
particularly those for <code>Missing/incorrect information</code>.
This is probably the most valuable place to start looking for efficiency improvements.</p>
</li>
<li>
<p>Missing information errors are more expensive than the model implies,
because they require coordination across teams to resolve.
Conversely, Puppet testing errors are probably cheaper than the model
implies, because they should be solvable within the same team and
consequently benefit from a quick iteration loop.</p>
</li>
</ol>
<p>Now we need to build a model that helps guide our inquiry into those questions.</p>
<h2 id="model">Model</h2>
<p>You can find the <a href="https://github.com/lethain/eng-strategy-models/blob/main/UberServiceOnboarding.ipynb">full implementation of this model on Github</a>
if you want to see the entirety rather than these emphasized snippets.</p>
<p>First, let&rsquo;s get the success states working:</p>
<pre><code>HiringRate(10)
ProductEngineers(1000)
[PotentialHires] &gt; ProductEngineers @ HiringRate

[PotentialServices] &gt; RequestedServices(10) @ ProductEngineers / 10
RequestedServices &gt; InflightServices(0, 10) @ Leak(1.0)
InflightServices &gt; PortNameAssigned @ Leak(1.0)
PortNameAssigned &gt; PuppetGenerated @ Leak(1.0)
PuppetGenerated &gt; PuppetConfigMerged @ Leak(1.0)
PuppetConfigMerged &gt; ServerCapacityAllocated @ Leak(1.0)
</code></pre>
<p>As we run this model, we can see that the number of requested services grows significantly over
time. This makes sense, as we&rsquo;re only able to provision a maximum of ten services per round.</p>
<p><img src="/static/blog/strategy/uber-model-diag-1.png" alt="Initial diagram of Uber service provisioning model without error states."></p>
<p>However, it&rsquo;s also the best case, because we&rsquo;re not capturing the three error states:</p>
<ol>
<li>Unique port and name assignment can fail because of missing or incorrect information</li>
<li>Puppet configuration can also fail due to missing or incorrect information.</li>
<li>Puppet configurations can have errors in them, requiring rework.</li>
</ol>
<p>Let&rsquo;s update the model to include these failure modes, starting with unique port and name assignment.
The error-free version looks like this:</p>
<pre><code>InflightServices &gt; PortNameAssigned @ Leak(1.0)
</code></pre>
<p>Now let&rsquo;s add in an error rate, where 20% of requests are missing information
and return to inflight services stock.</p>
<pre><code>PortNameAssigned &gt; PuppetGenerated @ Leak(0.8)
PortNameAssigned &gt; RequestedServices @ Leak(0.2)
</code></pre>
<p>Then let&rsquo;s do the same thing for puppet configuration errors:</p>
<pre><code># original version
PuppetGenerated &gt; PuppetConfigMerged @ Leak(1.0)

# updated version with errors
PuppetGenerated &gt; PuppetConfigMerged @ Leak(0.8)
PuppetGenerated &gt; InflightServices @ Leak(0.2)
</code></pre>
<p>Finally, we&rsquo;ll make a similar change to represent errors
made in the Puppet templates themselves:</p>
<pre><code># original version
PuppetConfigMerged &gt; ServerCapacityAllocated @ Leak(1.0)

# updated version with errors
PuppetConfigMerged &gt; ServerCapacityAllocated @ Leak(0.8)
PuppetConfigMerged &gt; PuppetGenerated @ Leak(0.2)
</code></pre>
<p>Even with relatively low error rates, we can see that the throughput of the system
overall has been meaningfully impacted by introducing these errors.</p>
<p><img src="/static/blog/strategy/uber-model-diag-2.png" alt="Updated diagram of Uber service provisioning model with error states."></p>
<p>Now that we have the foundation of the model built, it&rsquo;s time to start
exercising the model to understand the problem space a bit better.</p>
<h2 id="exercise">Exercise</h2>
<p>We already know the errors are impacting throughput, but let&rsquo;s start by
narrowing down which of errors matter most by increasing the error rate
for each of them independently and comparing the impact.</p>
<p>To model this, we&rsquo;ll create three new specifications, each of which increases
one error from from 20% error rate to 50% error rate, and see how the overall
throughput of the system is impacted:</p>
<pre><code># test 1: port assignment errors increased
PortNameAssigned &gt; PuppetGenerated @ Leak(0.5)
PortNameAssigned &gt; RequestedServices @ Leak(0.5)

# test 2: puppet generated errors increased
PuppetGenerated &gt; PuppetConfigMerged @ Leak(0.5)
PuppetGenerated &gt; InflightServices @ Leak(0.5)

# test 3: puppet merged errors increased
PuppetConfigMerged &gt; ServerCapacityAllocated @ Leak(0.5)
PuppetConfigMerged &gt; PuppetGenerated @ Leak(0.5)
</code></pre>
<p>Comparing the impact of increasing the error rates from 20% to 50% in each
of the three error loops, we can get a sense of the model&rsquo;s sensitivity to each error.</p>
<p><img src="/static/blog/strategy/uber-model-chart-diff-errors.png" alt="Chart showing impact of increased error rates in different stages of provisioning."></p>
<p>This chart captures why exercising is so impactful: we&rsquo;d assumed during sketching that
errors in puppet generation would matter the most because they caused a long trip backwards,
but it turns out a very high error rate early in the process matters even more because
there are still multiple other potential errors later on that compound on its increase.</p>
<p>Next we can get a sense of the impact of hiring more people onto the service
provisioning team to manually provision more services, which we can model by
increasing the maximum size of the inflight services stock from <code>10</code> to <code>50</code>.</p>
<pre><code># initial model
RequestedServices &gt; InflightServices(0, 10) @ Leak(1.0)

# with 5x capacity!
RequestedServices &gt; InflightServices(0, 50) @ Leak(1.0)
</code></pre>
<p>Unfortunately, we can see that even increasing the team&rsquo;s capacity by 500% doesn&rsquo;t solve the backlog of requested services.</p>
<p><img src="/static/blog/strategy/uber-model-chart-infra-hiring.png" alt="Chart showing impact of increased infrastructure engineering hiring on service provisioning."></p>
<p>There&rsquo;s some impact, but that much, and the backlog of requested services remains extremely high.
We can conclude that more infrastructure hiring isn&rsquo;t the solution we need, but let&rsquo;s
see if moving to self-service is a plausible solution.</p>
<p>We can simulate the impact of moving to self-service by removing the maximum size from
inflight services entirely:</p>
<pre><code># initial model
RequestedServices &gt; InflightServices(0, 10) @ Leak(1.0)

# simulating self-service
RequestedServices &gt; InflightServices(0) @ Leak(1.0)
</code></pre>
<p>We can see this finally solves the backlog.</p>
<p><img src="/static/blog/strategy/uber-model-chart-self-service.png" alt="Chart showing impact of self-service provisioning on provisioning rate."></p>
<p>At this point, we&rsquo;ve exercised the model a fair amount and have a good sense of what it wants to tell us.
We know which errors matter the most to invest in early, and we also know that we need to make the
move to a self-service platform sometime soon.</p>
<div class="mt4">
        <hr>
        
        <p class="f5"><span class="b mb3">Next chapter: </span> <a href="/wardley-compute-ecosystem/">Wardley mapping the service orchestration ecosystem (2014).</a></p>
        
        
        <p class="f5"><span class="b mb3">Previous chapter: </span> <a href="/uber-service-migration-strategy/">Uber&#39;s service migration strategy circa 2014.</a></p>
                
      </div>
      
      <div class="bg-light-gray br4 ph3 pv1">
        <p class="tracked">First published at <a href="https://lethain.com/uber-service-onboarding-model/">lethain.com/uber-service-onboarding-model/</a></p>      
      </div>
      

      <div class="mt6 instapaper_ignoref">
      
      </div>
    </div>

    <aside class="w-30-l mt1-l"><div class="bg-light-gray pa3 cf">
  <p class="f5 mb3">
    Hi folks. I'm <a href="https://lethain.com/about">Will Larson</a>,
    and this is my new book on engineering strategy, <em><a href="https://draftingstrategy.com/">Drafting Strategy</a></em>.
  </p>

  <p>
    I also wrote

    <em><a href="https://www.amazon.com/Elegant-Puzzle-Systems-Engineering-Management/dp/1732265186">An Elegant Puzzle</a></em>,
    <em><a href="https://staffeng.com/book">Staff Engineer</a></em>, and
      <em><a href="https://www.oreilly.com/library/view/the-engineering-executives/9781098149475/">The Engineering Executive's Primer</a></em>.
  </p>

  <p class="cf">
    <div class="fl w-third">
      <a href="https://www.amazon.com/Elegant-Puzzle-Systems-Engineering-Management/dp/1732265186">
        <img src="/static/aep-small-lq.jpg">
      </a>
    </div>
    <div class="fl w-third">    
      <a href="https://staffeng.com/book">
        <img src="/static/StaffEngBookMed.jpg">
      </a>
    </div>
    <div class="fl w-third">
      <a href="https://www.oreilly.com/library/view/the-engineering-executives/9781098149475/">
        <img src="/static/primer-cover-small.jpg">
      </a>
    </div>    
  </p>
</div>

<div class="bg-light-gray ph3 cf">
  <p class="f5 mb3">
    For updates on this project, join <em>Irrational Exuberance</em>'s
    <a href="/newsletter/">weekly newsletter</a>.
  </p>
</div>


<div class="bg-light-gray pa3 nested-list-reset nested-copy-line-height nested-links">
  
    <p class="f5"><span class="b mb3">Next chapter</span></p>
    <p class="f5"><a href="/wardley-compute-ecosystem/">Wardley mapping the service orchestration ecosystem (2014).</a></p>
    
    
  
    <p class="f5"><span class="b mb3">Previous chapter</span></p>
    <p class="f5"><a href="/uber-service-migration-strategy/">Uber&#39;s service migration strategy circa 2014.</a></p>
  
  <p class="f5 b mb3">Table of Contents</p>
  <nav id="TableOfContents">
  <ul>
    <li><a href="#learnings">Learnings</a></li>
    <li><a href="#sketch">Sketch</a></li>
    <li><a href="#reason">Reason</a></li>
    <li><a href="#model">Model</a></li>
    <li><a href="#exercise">Exercise</a></li>
  </ul>
</nav>
</div>
</aside>

  </article>

    </main>
    <footer class="bg-white bottom-0 w-100 pa3" role="contentinfo">
  <div class="flex justify-between">
  <a class="center f4 fw4 hover-white no-underline black-50 dn dib-ns pv2 ph3" href="http://localhost:58150/" >
    &copy;  Will Larson 2025 
  </a>
    <div><div class="ananke-socials"></div>
</div>
  </div>
</footer>

  </body>
</html>
